"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.router = void 0;
const express_1 = require("express");
const CreateUserController_1 = require("./controllers/user/CreateUserController");
const CreateStaffController_1 = require("./controllers/user/CreateStaffController");
const ListUsersController_1 = require("./controllers/user/ListUsersController");
const GetUserByIdController_1 = require("./controllers/user/GetUserByIdController");
const UpdateUserController_1 = require("./controllers/user/UpdateUserController");
const DeleteUserController_1 = require("./controllers/user/DeleteUserController");
const LoginController_1 = require("./controllers/auth/LoginController");
const StartTimeRecordController_1 = require("./controllers/timeRecord/StartTimeRecordController");
const StopTimeRecordController_1 = require("./controllers/timeRecord/StopTimeRecordController");
const ListTimeRecordsController_1 = require("./controllers/timeRecord/ListTimeRecordsController");
const GetSummaryController_1 = require("./controllers/timeRecord/GetSummaryController");
const CreateOrganizationController_1 = require("./controllers/organization/CreateOrganizationController");
const GetOrganizationController_1 = require("./controllers/organization/GetOrganizationController");
const UpdateOrganizationController_1 = require("./controllers/organization/UpdateOrganizationController");
const CreateProductController_1 = require("./controllers/product/CreateProductController");
const ListProductsController_1 = require("./controllers/product/ListProductsController");
const GetProductByIdController_1 = require("./controllers/product/GetProductByIdController");
const UpdateProductController_1 = require("./controllers/product/UpdateProductController");
const DeleteProductController_1 = require("./controllers/product/DeleteProductController");
const CreateStockEntryController_1 = require("./controllers/stock/CreateStockEntryController");
const CreateStockExitController_1 = require("./controllers/stock/CreateStockExitController");
const ListStockEntriesController_1 = require("./controllers/stock/ListStockEntriesController");
const ListStockExitsController_1 = require("./controllers/stock/ListStockExitsController");
const StockReportController_1 = require("./controllers/stock/StockReportController");
const validateSchema_1 = require("./middlewares/validateSchema");
const asyncHandler_1 = require("./middlewares/asyncHandler");
const authMiddleware_1 = require("./middlewares/authMiddleware");
const tenantMiddleware_1 = require("./middlewares/tenantMiddleware");
const roleMiddleware_1 = require("./middlewares/roleMiddleware");
const rateLimiter_1 = require("./middlewares/rateLimiter");
const userSchema_1 = require("./schemas/userSchema");
const authSchema_1 = require("./schemas/authSchema");
const productSchema_1 = require("./schemas/productSchema");
const stockSchema_1 = require("./schemas/stockSchema");
const organizationSchema_1 = require("./schemas/organizationSchema");
const router = (0, express_1.Router)();
exports.router = router;
router.post("/auth/login", rateLimiter_1.loginLimiter, (0, validateSchema_1.validateSchema)(authSchema_1.loginSchema), (0, asyncHandler_1.asyncHandler)(new LoginController_1.LoginController().handle));
router.post("/users", rateLimiter_1.createUserLimiter, (0, validateSchema_1.validateSchema)(userSchema_1.createUserSchema), (0, asyncHandler_1.asyncHandler)(new CreateUserController_1.CreateUserController().handle));
router.post("/users/staff", authMiddleware_1.authMiddleware, (0, roleMiddleware_1.roleMiddleware)(['ADMIN']), (0, validateSchema_1.validateSchema)(userSchema_1.createStaffSchema), (0, asyncHandler_1.asyncHandler)(new CreateStaffController_1.CreateStaffController().handle));
router.get("/users", authMiddleware_1.authMiddleware, (0, asyncHandler_1.asyncHandler)(new ListUsersController_1.ListUsersController().handle));
router.get("/users/:id", authMiddleware_1.authMiddleware, (0, asyncHandler_1.asyncHandler)(new GetUserByIdController_1.GetUserByIdController().handle));
router.put("/users/:id", authMiddleware_1.authMiddleware, (0, validateSchema_1.validateSchema)(userSchema_1.updateUserSchema), (0, asyncHandler_1.asyncHandler)(new UpdateUserController_1.UpdateUserController().handle));
router.delete("/users/:id", authMiddleware_1.authMiddleware, (0, roleMiddleware_1.roleMiddleware)(['ADMIN']), (0, asyncHandler_1.asyncHandler)(new DeleteUserController_1.DeleteUserController().handle));
router.post("/time-records/start", authMiddleware_1.authMiddleware, (0, asyncHandler_1.asyncHandler)(new StartTimeRecordController_1.StartTimeRecordController().handle));
router.post("/time-records/stop", authMiddleware_1.authMiddleware, (0, asyncHandler_1.asyncHandler)(new StopTimeRecordController_1.StopTimeRecordController().handle));
router.get("/time-records", authMiddleware_1.authMiddleware, (0, asyncHandler_1.asyncHandler)(new ListTimeRecordsController_1.ListTimeRecordsController().handle));
router.get("/time-records/summary", authMiddleware_1.authMiddleware, (0, asyncHandler_1.asyncHandler)(new GetSummaryController_1.GetSummaryController().handle));
router.post("/organizations", authMiddleware_1.authMiddleware, (0, validateSchema_1.validateSchema)(stockSchema_1.createOrganizationSchema), (0, asyncHandler_1.asyncHandler)(new CreateOrganizationController_1.CreateOrganizationController().handle));
router.get("/organizations", authMiddleware_1.authMiddleware, tenantMiddleware_1.tenantMiddleware, (0, asyncHandler_1.asyncHandler)(new GetOrganizationController_1.GetOrganizationController().handle));
router.put("/organizations", authMiddleware_1.authMiddleware, tenantMiddleware_1.tenantMiddleware, (0, validateSchema_1.validateSchema)(organizationSchema_1.updateOrganizationSchema), (0, asyncHandler_1.asyncHandler)(new UpdateOrganizationController_1.UpdateOrganizationController().handle));
router.post("/products", authMiddleware_1.authMiddleware, tenantMiddleware_1.tenantMiddleware, (0, validateSchema_1.validateSchema)(productSchema_1.createProductSchema), (0, asyncHandler_1.asyncHandler)(new CreateProductController_1.CreateProductController().handle));
router.get("/products", authMiddleware_1.authMiddleware, tenantMiddleware_1.tenantMiddleware, (0, asyncHandler_1.asyncHandler)(new ListProductsController_1.ListProductsController().handle));
router.get("/products/:id", authMiddleware_1.authMiddleware, tenantMiddleware_1.tenantMiddleware, (0, asyncHandler_1.asyncHandler)(new GetProductByIdController_1.GetProductByIdController().handle));
router.put("/products/:id", authMiddleware_1.authMiddleware, tenantMiddleware_1.tenantMiddleware, (0, validateSchema_1.validateSchema)(productSchema_1.updateProductSchema), (0, asyncHandler_1.asyncHandler)(new UpdateProductController_1.UpdateProductController().handle));
router.delete("/products/:id", authMiddleware_1.authMiddleware, tenantMiddleware_1.tenantMiddleware, (0, asyncHandler_1.asyncHandler)(new DeleteProductController_1.DeleteProductController().handle));
router.post("/stock/entries", authMiddleware_1.authMiddleware, tenantMiddleware_1.tenantMiddleware, (0, validateSchema_1.validateSchema)(stockSchema_1.createStockEntrySchema), (0, asyncHandler_1.asyncHandler)(new CreateStockEntryController_1.CreateStockEntryController().handle));
router.get("/stock/entries", authMiddleware_1.authMiddleware, tenantMiddleware_1.tenantMiddleware, (0, asyncHandler_1.asyncHandler)(new ListStockEntriesController_1.ListStockEntriesController().handle));
router.post("/stock/exits", authMiddleware_1.authMiddleware, tenantMiddleware_1.tenantMiddleware, (0, validateSchema_1.validateSchema)(stockSchema_1.createStockExitSchema), (0, asyncHandler_1.asyncHandler)(new CreateStockExitController_1.CreateStockExitController().handle));
router.get("/stock/exits", authMiddleware_1.authMiddleware, tenantMiddleware_1.tenantMiddleware, (0, asyncHandler_1.asyncHandler)(new ListStockExitsController_1.ListStockExitsController().handle));
const stockReportController = new StockReportController_1.StockReportController();
router.get("/stock/current", authMiddleware_1.authMiddleware, tenantMiddleware_1.tenantMiddleware, (0, asyncHandler_1.asyncHandler)(stockReportController.getCurrentStock.bind(stockReportController)));
router.get("/stock/low-stock", authMiddleware_1.authMiddleware, tenantMiddleware_1.tenantMiddleware, (0, asyncHandler_1.asyncHandler)(stockReportController.getLowStock.bind(stockReportController)));
router.get("/stock/daily-usage", authMiddleware_1.authMiddleware, tenantMiddleware_1.tenantMiddleware, (0, asyncHandler_1.asyncHandler)(stockReportController.getDailyUsage.bind(stockReportController)));
router.get("/stock/weekly-usage", authMiddleware_1.authMiddleware, tenantMiddleware_1.tenantMiddleware, (0, asyncHandler_1.asyncHandler)(stockReportController.getWeeklyUsage.bind(stockReportController)));
router.get("/stock/total-value", authMiddleware_1.authMiddleware, tenantMiddleware_1.tenantMiddleware, (0, asyncHandler_1.asyncHandler)(stockReportController.getTotalValue.bind(stockReportController)));
//# sourceMappingURL=routes.js.map